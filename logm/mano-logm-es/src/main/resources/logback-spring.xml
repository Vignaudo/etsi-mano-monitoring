<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<appender name="ELASTIC"
		class="com.internetitem.logback.elasticsearch.ElasticsearchAppender">
		<url>http://superuser:x^ZyuGM6~u=+fY2G@10.31.1.245:9200/_bulk</url>
		<index>logs-%date{yyyy-MM-dd}</index>
		<type>tester</type>
		<loggerName>es-logger</loggerName>
		<authentication
			class="com.internetitem.logback.elasticsearch.config.BasicAuthentication" />
		<properties>
			<property>
				<name>host</name>
				<value>${HOSTNAME}</value>
				<allowEmpty>false</allowEmpty>
			</property>
			<property>
				<name>severity</name>
				<value>%level</value>
			</property>
			<property>
				<name>thread</name>
				<value>%thread</value>
			</property>
			<property>
				<name>stacktrace</name>
				<value>%ex</value>
			</property>
			<property>
				<name>traceID</name>
				<value>%X{traceId:-NONE}</value>
			</property>
			<property>
				<name>logger</name>
				<value>%logger</value>
			</property>
		</properties>
		<headers>
			<header>
				<name>Content-Type</name>
				<value>application/json</value>
			</header>
		</headers>
	</appender>

	<root level="info">
		<appender-ref ref="ELASTIC" />
	</root>

	<logger name="es-logger" level="INFO" additivity="false">
		<appender name="ES_FILE"
			class="ch.qos.logback.core.rolling.RollingFileAppender">
			<!-- ... -->
			<encoder>
				<pattern>%msg</pattern> <!-- This pattern is important, otherwise it won't be the raw Elasticsearch 
					format anyomre -->
			</encoder>
		</appender>
	</logger>
</configuration>